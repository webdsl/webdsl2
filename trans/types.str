module trans/types

imports
	
	lib/editor-common.generated
	lib/task/core
	function/trans/types

signature

	constructors
		
		Type : Result -> Type
	
rules
	
	print-type = pp-webdsl-string

	// Gets the type of the given term, or fails if the term has no type.
	type-of:
		t{anno*} -> type
		where
			result := <collect-one(?Type(<id>))> anno*;
			type   := <task-get-result; Hd> result

	type-task(|partition):
		t{a*} -> t{Type(<type-of-task(|partition)> t), a*}